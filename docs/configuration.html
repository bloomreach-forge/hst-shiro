<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-04-18
 | Rendered using Hippo Forge Maven Skin 1.04.00 based on Apache Maven Fluido Skin
-->
<!--[if lt IE 7]><html id="ie6" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 7]><html id="ie7" xmlns="http://www.w3.org/1999/xhtml"  xml:lang="en" lang="en"><![endif]-->
<!--[if IE 8]><html id="ie8" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if IE 9]><html id="ie9" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><![endif]-->
<!--[if !IE]>--><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><!--<![endif]-->

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                    <meta name="Date-Revision-yyyymmdd" content="20170418"/>
                <meta http-equiv="Content-Language" content="en"/>
        <title>HST - Apache Shiro Integration Support Documentation &#x2013; Configuration</title>
    <link rel="stylesheet" href="./css/forge-maven-skin-syntaxhighlighter-1.04.00.min.css"/>
    <link rel="stylesheet" href="./css/forge-maven-skin-1.04.00.min.css"/>
    <link rel="stylesheet" href="./css/site.css"/>
    <link rel="stylesheet" href="./css/print.css" media="print"/>

        
    <script type="text/javascript" src="./js/forge-maven-skin-syntaxhighlighter-1.04.00.min.js"></script>
    <script type="text/javascript" src="./js/forge-maven-skin-1.04.00.min.js"></script>

    
            </head>
    <body>

        
    
    
    <div class="container-fluid">
        <div class="row-fluid">
            <div id="header">
                <div id="logo">
                    <a href="http://www.onehippo.com">
                        <img src="./images/hipposkin/hippo-logo.png" alt="Hippo Logo" />
                    </a>
                </div>

                <h1>
                                            HST - Apache Shiro Integration Support Documentation
                    
                </h1>
                <div class="clearfix"></div>
            </div>
        </div>

        <div class="row-fluid">
            <div id="breadcrumbs" class="clearfix">
                <ul class="breadcrumb">
                                
                                        
                            <li id="publishDate">Last Published: 2017-04-18</li>
                                                                                                                                                </ul>

                <div class="links">
                    <a href="https://www.onehippo.com">Onehippo.com</a>
                    <a href="https://www.onehippo.org">Onehippo.org</a>
                </div>
            </div>
        </div>



            
    <div class="row-fluid">
        <div id="leftColumn" class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                                        <li class="nav-header">Home</li>
                                                           
        <li>
    
                                                <a href="index.html" title="Home">
                    <i class="none"></i>
                Home</a>
                    </li>
                               
        <li>
    
                                                <a href="release-notes.html" title="Release Notes">
                    <i class="none"></i>
                Release Notes</a>
                    </li>
                                                            <li class="nav-header">Usage</li>
                                                           
        <li>
    
                                                <a href="install.html" title="Installation">
                    <i class="none"></i>
                Installation</a>
                    </li>
                               
        <li class="active">
    
                        <a href="#"><i class="none"></i>Configuration</a>
                </li>
                               
        <li>
    
                                                <a href="hipporepo-realm.html" title="Detail on HippoRepositoryRealm">
                    <i class="none"></i>
                Detail on HippoRepositoryRealm</a>
                    </li>
                                                            <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
        <li>
    
                                                <a href="project-info.html" title="Project Information">
                    <i class="icon-chevron-right"></i>
                Project Information</a>
                                </li>
                                                                                                                                                                                                                                                                                                                                                                                                                           
        <li>
    
                                                <a href="project-reports.html" title="Project Reports">
                    <i class="icon-chevron-right"></i>
                Project Reports</a>
                                </li>
                        </ul>

                
                <hr class="divider"/>

                <div id="poweredBy">
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                            <div class="clear"></div>
                                                <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
            <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png"/>
        </a>
                            </div>
            </div>
        </div>
    
        
        <div id="bodyColumn"  class="span9" >
                                
            <!-- Copyright 2011 Hippo Licensed under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License. You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0 Unless required by
    applicable law or agreed to in writing, software distributed under
    the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES
    OR CONDITIONS OF ANY KIND, either express or implied. See the
    License for the specific language governing permissions and
    limitations under the License. -->
  
    <div class="section">
<h2><a name="Configuration"></a>Configuration</h2>
      
<div class="section">
<h3><a name="Simple_INI_Configuration_Example_with_Apache_Shiro"></a>Simple INI Configuration Example with Apache Shiro</h3>
        
<p>
          One of the simplest setup for a web application is to add /WEB-INF/shiro.ini file
          as explained in <a class="externalLink" href="http://shiro.apache.org/webapp-tutorial.html" target="_blank">Securing Web Applications with Apache Shiro</a>.
        </p>
        
<p>
          A simple INI configuration with HippoRepositoryRealm can be configured like the following example:
        </p>
        
<div class="brush: plain">
        
<div class="source"><pre class="prettyprint linenums">
[main]

hippoRealm = org.onehippo.forge.security.support.shiro.realm.HippoRepositoryRealm
hippoRealm.defaultRoleName = everybody
hippoRealm.permissionsLookupEnabled = true

securityManager.realms = $hippoRealm

cacheManager = org.apache.shiro.cache.MemoryConstrainedCacheManager
securityManager.cacheManager = $cacheManager

shiro.loginUrl = /login.jsp


[urls]

/login.jsp = authc
/logout = logout
/events/** = authc
        </pre></div>
        </div>
        
<p>
          In the example configuration shown above, you can find the examples with login URL and restricted URLs
          as explained in <a class="externalLink" href="http://shiro.apache.org/webapp-tutorial.html" target="_blank">Securing Web Applications with Apache Shiro</a>.
          In addition, it configures <tt>HippoRepositoryRealm</tt> as the default <tt>realm</tt> in order to
          demonstrate how it authenticates/authorizes users against Hippo Repository security data store.
        </p>
      </div>
      
<div class="section">
<h3><a name="Securing_Your_Site"></a>Securing Your Site</h3>
        
<p>
          Now, you can secure your web site by setting 'hst:authenticated', 'hst:roles' or 'hst:users' either 'hst:sitemapitem' node or 'hst:mount' node.
        </p>
        
<p>
          For example, if you have 'securedresource' sitemap item, and it has 'hst:authenticated=true' and 'hst:roles=[ 'everybody' ], then
          any requests to the sitemap item will be allowed only authenticated users.
        </p>
        
<p>
          HST - Apache Shiro Integration Support supports the same feature for authorization as the default HST-2 Security module provides.
          So, please refer to the following link in order to learn how to set authorization.
        </p>
        
<ul>
          
<li><a class="externalLink" href="http://www.onehippo.org/library/concepts/security/hst-2-authentication-and-authorization-support.html">HST-2 Authentication and Authorization Support</a>.</li>
        </ul>
        
<p>
          <b><i>Note: </i></b>
          Because Apache Shiro Servlet Filters set up JEE standard principals automatically even with the simple configurations,
          you don't have to try to add or customize a security related Valve in HST-2 container at all.
        </p>
      </div>
      
<div class="section">
<h3><a name="Using_Apache_Shiro_Tag_Libraries"></a>Using Apache Shiro Tag Libraries</h3>
        
<p>
          You can take advantage of Apache Shiro JSTL Tag Libraries to secure web resources
          Please see the examples in <a class="externalLink" href="http://shiro.apache.org/webapp-tutorial.html" target="_blank">Securing Web Applications with Apache Shiro</a>.
        </p>
        
<p>
          Also see an example JSP page in the demo project:
          <a class="externalLink" href="http://forge.onehippo.org/svn/hst-shirointeg/hst-shirointeg-demo/trunk/site/src/main/webapp/WEB-INF/jsp/hstshirointegdemo/homepage-main.jsp">http://forge.onehippo.org/svn/hst-shirointeg/hst-shirointeg-demo/trunk/site/src/main/webapp/WEB-INF/jsp/hstshirointegdemo/homepage-main.jsp</a>.
        </p>
      </div>
      
<div class="section">
<h3><a name="Using_Standard_Security_APIs"></a>Using Standard Security APIs</h3>
        
<p>
          Also, you can use JavaEE standard Security APIs now in your components or servlet/filter for programmatic security checks such as:
        </p>
        
<ul>
          
<li><tt>javax.servlet.http.HttpServletRequest#getUserPrincipal()</tt></li>
          
<li><tt>javax.servlet.http.HttpServletRequest#isUserInRole(java.lang.String role)</tt></li>
        </ul>
      </div>
    </div>
  

            </div>
        </div>
    </div>

    <hr/>

    <footer>
                <div class="container-fluid">
                <div class="row span12">Copyright &copy;                                                2017.
                        All Rights Reserved.            
                                        
            </div>

        
        
                </div>
    </footer>
</body>
</html>
